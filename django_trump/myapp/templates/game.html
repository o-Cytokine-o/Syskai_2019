{% load static %}
<html>
  <head>
      <meta charset="UTF-8">
      <script src="js/encoding/encoding.js"></script>
  </head>
  <body>
    {% block extrahead %}
      <link href="{% static 'game.css' %}" rel="stylesheet">
    {% endblock %}

    <!--- 画像認識表示 -->
    <div class='a1'>
      <img src="{% url 'myapp:view_OD' %}" class="game">
    </div>

    <!--- アシスト表示 --->
    <div class="b1">
      <h4 class="assist1"></h4>
      <h4 class="assist2"></h4>
      <h4 class="assist3"></h4>
      <h4 class="assist4"></h4>
    </div>
      
    <!--- チュートリアル表示 --->
    <div class="c1">
      <p class="">チュートリアル表示</p>
      <p class="tutorial1"></p>
      <p class="tutorial2"></p>
      <p class="tutorial3"></p>
    </div>

    <div class="menu">
        <label for="menu_bar01">基本ルール</label>
        <input type="checkbox" id="menu_bar01" class="accordion" />
        <ul id="links01">
          <li>ディーラーが自分とプレイヤーにカードを配り、手札の合計数が21点に近い方が勝ちです</li>
          <li>カードの合計値が21点を超えた場合バーストになり、負けとなります。</li>
        </ul>
      <label for="menu_bar02">カードの点数について</label>
      <input type="checkbox" id="menu_bar02" class="accordion" />
      <ul id="links02">
          <li>2~10:数字通りの点数</li>
          <li>絵札:全て10点</li>
          <li>A:1点or11点</li>
      </ul>
      <label for="menu_bar03">宣言について</label>
      <input type="checkbox" id="menu_bar03" class="accordion" />
      <ul id="links03">
          <li>カードを引く場合はヒット</li>
          <li>それ以上引かない場合はスタンド</li>
      </ul>
    </div>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script>
    $(function() {
    
        socket = new WebSocket("ws://localhost:9990/");
        socket.onmessage = function(e) {
            var tuto_assist_text = e.data
            /*テキストをチュートリアルとアシストに分割*/
            text_arr = tuto_assist_text.split(':')

            /*チュートリアル文をhtmlに置く*/
            tutorial_text = text_arr[0].split(',')
            var i = 1
            tutorial_text.forEach(function(value){
              $('.tutorial1').html(value);
              i++;
            });
            
            /*アシスト文をhtmlに置く*/
            assist_text = text_arr[1].split(',')
            var i = 1
            assist_text.forEach(function(value){
              $('.assist'+(i+1)).html(value);
              i++;
            });
    
        }
    });
    
  </script>
</html>